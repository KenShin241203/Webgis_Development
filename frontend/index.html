<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ƒê√™ Bao Vi·ªát Nam - WebGIS</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.css" />
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="tables.css">
    <link rel="stylesheet" href="login/login-popup.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
</head>

<body>
    <header class="main-header">
        <div class="header-left">
            <img src="../assets/HDH/logo.jpg" alt="Logo" class="logo">
            <h1>WEBGIS H·∫¢I D∆Ø∆†NG H·ªåC</h1>
        </div>
        <nav class="header-nav">
            <div class="nav-item">
                <button id="toggleWeatherBtn" class="nav-btn">üå§Ô∏è Th·ªùi ti·∫øt</button>
            </div>
            <div class="nav-item dropdown" id="layerDropdownContainer" style="display: none;">
                <button class="nav-btn dropdown-toggle" id="layerDropdownBtn">
                    Th√™m l·ªõp <span class="dropdown-arrow">‚ñº</span>
                </button>
                <div class="dropdown-menu" id="layerDropdownMenu">
                    <!-- <div class="dropdown-item" data-layer="elements-hydro">
                        <span class="layer-name">L∆∞·ªõi th·ªßy l·ª±c + D·ªØ li·ªáu th·ªßy ƒë·ªông l·ª±c</span>
                        <button class="table-toggle-btn" data-layer="elements-hydro" disabled>üìä</button>
                    </div>
                    <div class="dropdown-item" data-layer="mo-hinh-thuy-luc-2d">
                        <span class="layer-name">M√¥ h√¨nh th·ªßy l·ª±c 2D</span>
                        <button class="table-toggle-btn" data-layer="mo-hinh-thuy-luc-2d" disabled>üìä</button>
                    </div> -->
                    <div class="dropdown-item" data-layer="mo-hinh-thuy-luc-2d-canvas">
                        <span class="layer-name">M√¥ h√¨nh th·ªßy l·ª±c 2D (Canvas)</span>
                        <button class="table-toggle-btn" data-layer="mo-hinh-thuy-luc-2d-canvas" disabled>üìä</button>
                    </div>
                    <div class="dropdown-item" data-layer="mo-hinh-thuy-luc-2d-contour">
                        <span class="layer-name">M√¥ h√¨nh th·ªßy l·ª±c 2D (Contour Lines)</span>
                        <button class="table-toggle-btn" data-layer="mo-hinh-thuy-luc-2d-contour" disabled>üìä</button>
                    </div>
                    <div class="dropdown-item" data-layer="cong">
                        <span class="layer-name">C·ªëng</span>
                        <button class="table-toggle-btn" data-layer="cong" disabled>üìä</button>
                    </div>
                    <div class="dropdown-item" data-layer="chatluong">
                        <span class="layer-name">B·ªù bao</span>
                        <button class="table-toggle-btn" data-layer="chatluong" disabled>üìä</button>
                    </div>
                    <div class="dropdown-item" data-layer="debao">
                        <span class="layer-name">ƒê√™ bao</span>
                        <button class="table-toggle-btn" data-layer="debao" disabled>üìä</button>
                    </div>
                    <div class="dropdown-item" data-layer="dolun">
                        <span class="layer-name">ƒê·ªô l√∫n</span>
                        <button class="table-toggle-btn" data-layer="dolun" disabled>üìä</button>
                    </div>
                    <div class="dropdown-item" data-layer="hientrang">
                        <span class="layer-name">Hi·ªán tr·∫°ng</span>
                        <button class="table-toggle-btn" data-layer="hientrang" disabled>üìä</button>
                    </div>
                    <div class="dropdown-item" data-layer="sutlun">
                        <span class="layer-name">S·ª•t l√∫n</span>
                        <button class="table-toggle-btn" data-layer="sutlun" disabled>üìä</button>
                    </div>
                    <div class="dropdown-item" data-layer="ngaplut">
                        <span class="layer-name">Ng·∫≠p l·ª•t</span>
                        <button class="table-toggle-btn" data-layer="ngaplut" disabled>üìä</button>
                    </div>
                    <div class="dropdown-item" data-layer="khaosat">
                        <span class="layer-name">ƒêi·ªÉm kh·∫£o s√°t</span>
                        <button class="table-toggle-btn" data-layer="khaosat" disabled>üìä</button>
                    </div>
                </div>
            </div>
            <div class="nav-item" id="adminUserManageContainer" style="display: none;">
                <button id="manageUsersBtn" class="nav-btn">üë§ Qu·∫£n l√Ω User</button>
                <button id="manageRolesBtn" class="nav-btn">üõ°Ô∏è Ph√¢n quy·ªÅn</button>
            </div>
            <div class="nav-item">
                <button id="loginBtn" class="nav-btn">ƒêƒÉng nh·∫≠p</button>
            </div>
            <div class="nav-item user-info" style="display: none;">
                <span id="headerUsername" class="username"></span>
                <button id="logoutBtn" title="ƒêƒÉng xu·∫•t" class="logout-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" />
                        <polyline points="16 17 21 12 16 7" />
                        <line x1="21" y1="12" x2="9" y2="12" />
                    </svg>
                </button>
            </div>
        </nav>
    </header>
    <div id="map"></div>

    <!-- Loading Spinner cho Layer -->
    <div id="layerLoadingSpinner" class="layer-loading-spinner" style="display: none;">
        <div class="spinner-container">
            <div class="spinner"></div>
            <div class="spinner-text" id="loadingSpinnerText">ƒêang t·∫£i d·ªØ li·ªáu...</div>
        </div>
    </div>

    <div id="miniMap" class="mini-map-container"></div>

    <!-- Time Slider cho M√¥ h√¨nh th·ªßy l·ª±c 2D - Canvas Version -->
    <div id="thuyLuc2DTimeSliderContainerCanvas" class="time-slider-container date-picker-container"
        style="display: none;">
        <div class="time-slider-header">
            <h4>üìÖ Ch·ªçn kho·∫£ng ng√†y - M√¥ h√¨nh th·ªßy l·ª±c 2D (Canvas)</h4>
            <button onclick="closeTimeSlider2DCanvas()" class="time-slider-close-btn">‚úï</button>
        </div>
        <div class="time-slider-content date-picker-card">
            <div class="date-range-picker">
                <div class="date-input-group">
                    <label for="thuyLuc2DStartDatePickerCanvas" class="date-picker-label">T·ª´ ng√†y</label>
                    <input type="date" id="thuyLuc2DStartDatePickerCanvas" class="date-picker-input"
                        onchange="onDateChangeCanvas()" />
                </div>
                <div class="date-separator">‚Üí</div>
                <div class="date-input-group">
                    <label for="thuyLuc2DEndDatePickerCanvas" class="date-picker-label">ƒê·∫øn ng√†y</label>
                    <input type="date" id="thuyLuc2DEndDatePickerCanvas" class="date-picker-input"
                        onchange="onDateChangeCanvas()" />
                </div>
            </div>
            <div class="date-picker-display">
                <span id="thuyLuc2DTimeDisplayCanvas">--</span>
            </div>
            <button onclick="onSearchHydroDataCanvas()" class="date-picker-btn">üîç T√¨m ki·∫øm</button>
        </div>
    </div>

    <div class="footer" id="coord">Vƒ© ƒë·ªô: 0 | Kinh ƒë·ªô: 0 | T·ªâ l·ªá ph√≥ng: 0</div>
    <div id="controlPopup" class="popup">
        <div class="popup-content">
            <span id="closePopup">√ó</span>
            <h2>ƒêi·ªÅu khi·ªÉn</h2>
            <div class="search-container">
                <input type="text" id="search-input" placeholder="T√¨m ki·∫øm v·ªã tr√≠...">
                <button onclick="searchLocation()">T√¨m</button>
            </div>
            <div class="control-buttons">
                <button onclick="toggleWeather()" class="control-btn">üå§Ô∏è B·∫≠t/t·∫Øt th·ªùi ti·∫øt</button>
                <button onclick="addLayer()" class="control-btn">üìä Th√™m l·ªõp</button>
                <button onclick="goToMap()" class="control-btn">üó∫Ô∏è Tr·ªü v·ªÅ</button>
                <button id="toggleDraw" class="control-btn">‚úèÔ∏è B·∫≠t v·∫Ω ƒëa gi√°c</button>
            </div>

            <div class="query-container">
                <label for="dataTypeSelect">Ch·ªçn lo·∫°i d·ªØ li·ªáu:</label>
                <select id="dataTypeSelect">
                    <option value="satlo">S·∫°t l·ªü</option>
                    <option value="debao">ƒê√™ bao</option>
                    <!-- Th√™m c√°c lo·∫°i kh√°c n·∫øu c·∫ßn -->
                </select>
                <button onclick="queryData()" class="query-btn">üîç Truy v·∫•n</button>
            </div>
        </div>
    </div>

    <div id="elements-table-container" class="data-table-container" style="display: none;">
        <!-- Resize handles -->
        <div class="resize-handle n"></div>
        <div class="resize-handle s"></div>
        <div class="resize-handle e"></div>
        <div class="resize-handle w"></div>
        <div class="resize-handle ne"></div>
        <div class="resize-handle nw"></div>
        <div class="resize-handle se"></div>
        <div class="resize-handle sw"></div>

        <div id="elements-table-header" class="data-table-header">
            <div class="data-table-title-container">
                <h4 class="data-table-title">üìä B·∫£ng Elements (l∆∞·ªõi th·ªßy l·ª±c)</h4>
                <button onclick="closeElementsTable()" class="data-table-close-btn">‚úï</button>
            </div>
            <div class="data-table-controls">
                <div class="data-table-actions">
                    <div class="data-table-search-section">
                        <input type="text" id="elements-search-input" placeholder="T√¨m theo ID ho·∫∑c t·ªça ƒë·ªô..."
                            class="data-table-search-input">
                        <button onclick="searchElementsData()" class="data-table-search-btn">üîç</button>
                    </div>
                    <button onclick="addElementRecord()" class="data-table-action-btn add-btn">‚ûï Th√™m</button>
                    <button onclick="editElementRecord()" class="data-table-action-btn edit-btn" disabled>‚úèÔ∏è
                        S·ª≠a</button>
                    <button onclick="deleteElementRecord()" class="data-table-action-btn delete-btn" disabled>üóëÔ∏è
                        X√≥a</button>
                </div>
                <div class="data-table-pagination-controls">
                    <label for="elements-pageSize" class="data-table-label">S·ªë d√≤ng hi·ªÉn th·ªã:</label>
                    <input type="number" id="elements-pageSize" value="500" min="1" max="100000"
                        class="data-table-page-size">
                    <button onclick="updateElementsData()" class="data-table-update-btn">C·∫≠p nh·∫≠t</button>
                </div>
            </div>
        </div>
        <div class="data-table-content">
            <table id="elements-table" class="data-table">
                <thead>
                    <tr>
                        <th>Element ID</th>
                        <th>X</th>
                        <th>Y</th>
                        <th>Area</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- D·ªØ li·ªáu s·∫Ω ƒë∆∞·ª£c th√™m ·ªü ƒë√¢y -->
                </tbody>
            </table>
            <div id="elements-pagination" class="data-table-pagination"></div>
        </div>
    </div>

    <!-- B·∫£ng d·ªØ li·ªáu Hydro -->
    <div id="hydro-table-container" class="data-table-container" style="display: none;">
        <!-- Resize handles -->
        <div class="resize-handle n"></div>
        <div class="resize-handle s"></div>
        <div class="resize-handle e"></div>
        <div class="resize-handle w"></div>
        <div class="resize-handle ne"></div>
        <div class="resize-handle nw"></div>
        <div class="resize-handle se"></div>
        <div class="resize-handle sw"></div>

        <div id="hydro-table-header" class="data-table-header">
            <div class="data-table-title-container">
                <h4 class="data-table-title">üìä B·∫£ng d·ªØ li·ªáu Hydro (th·ªßy ƒë·ªông l·ª±c)</h4>
                <button onclick="closeHydroTable()" class="data-table-close-btn">‚úï</button>
            </div>
            <div class="data-table-controls">
                <div class="data-table-actions">
                    <div class="data-table-search-section">
                        <input type="text" id="hydro-search-input" placeholder="T√¨m ki·∫øm..."
                            class="data-table-search-input">
                        <button onclick="searchHydroData()" class="data-table-search-btn">üîç</button>
                    </div>
                    <button onclick="addHydroRecord()" class="data-table-action-btn add-btn">‚ûï Th√™m</button>
                    <button onclick="editHydroRecord()" class="data-table-action-btn edit-btn" disabled>‚úèÔ∏è S·ª≠a</button>
                    <button onclick="deleteHydroRecord()" class="data-table-action-btn delete-btn" disabled>üóëÔ∏è
                        X√≥a</button>
                </div>
                <div class="data-table-pagination-controls">
                    <label for="hydro-pageSize" class="data-table-label">S·ªë d√≤ng hi·ªÉn th·ªã:</label>
                    <input type="number" id="hydro-pageSize" value="50" min="1" max="10000"
                        class="data-table-page-size">
                    <button onclick="updateHydroData()" class="data-table-update-btn">C·∫≠p nh·∫≠t</button>
                </div>
            </div>
        </div>
        <div class="data-table-content">
            <table id="hydro-table" class="data-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Element ID</th>
                        <th>Th·ªùi gian</th>
                        <th>ƒê·ªô cao m·∫∑t n∆∞·ªõc (m)</th>
                        <th>ƒê·ªô s√¢u t·ªïng (m)</th>
                        <th>V·∫≠n t·ªëc U (m/s)</th>
                        <th>V·∫≠n t·ªëc V (m/s)</th>
                        <th>T·ªëc ƒë·ªô (m/s)</th>
                        <th>H∆∞·ªõng (¬∞)</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- D·ªØ li·ªáu s·∫Ω ƒë∆∞·ª£c th√™m ·ªü ƒë√¢y -->
                </tbody>
            </table>
            <div id="hydro-pagination" class="data-table-pagination"></div>
        </div>
    </div>

    <!-- Popup ƒëƒÉng nh·∫≠p -->
    <div id="loginPopup" class="popup">
        <div class="popup-content">
            <span id="closeLoginPopup">√ó</span>
            <h2>ƒêƒÉng nh·∫≠p</h2>
            <form id="loginForm">
                <div class="input-group">
                    <input type="text" id="username" placeholder="T√™n ƒëƒÉng nh·∫≠p" required>
                    <div class="input-icon">üë§</div>
                </div>
                <div class="input-group">
                    <input type="password" id="password" placeholder="M·∫≠t kh·∫©u" required>
                    <div class="input-icon">üîí</div>
                </div>
                <button type="submit" id="loginSubmitBtn">
                    <span class="btn-text">ƒêƒÉng nh·∫≠p</span>
                    <span class="btn-loading" style="display: none;">‚è≥</span>
                </button>
            </form>
        </div>
    </div>

    <div id="sutlun-table-container" class="data-table-container">
        <!-- Resize handles -->
        <div class="resize-handle n"></div>
        <div class="resize-handle s"></div>
        <div class="resize-handle e"></div>
        <div class="resize-handle w"></div>
        <div class="resize-handle ne"></div>
        <div class="resize-handle nw"></div>
        <div class="resize-handle se"></div>
        <div class="resize-handle sw"></div>

        <div id="sutlun-table-header" class="data-table-header">
            <div class="data-table-title-container">
                <h4 class="data-table-title">üìä B·∫£ng d·ªØ li·ªáu S·ª•t l√∫n</h4>
                <button onclick="closeSutLunTable()" class="data-table-close-btn">‚úï</button>
            </div>
            <div class="data-table-controls">
                <div class="data-table-actions">
                    <div class="data-table-search-section">
                        <input type="text" id="sutlun-search-input" placeholder="T√¨m ki·∫øm..."
                            class="data-table-search-input">
                        <button onclick="searchSutLunData()" class="data-table-search-btn">üîç</button>
                    </div>
                    <button onclick="addSutLunRecord()" class="data-table-action-btn add-btn">‚ûï Th√™m</button>
                    <button onclick="editSutLunRecord()" class="data-table-action-btn edit-btn" disabled>‚úèÔ∏è S·ª≠a</button>
                    <button onclick="deleteSutLunRecord()" class="data-table-action-btn delete-btn" disabled>üóëÔ∏è
                        X√≥a</button>
                </div>
                <div class="data-table-pagination-controls">
                    <label for="sutlun-pageSize" class="data-table-label">S·ªë d√≤ng hi·ªÉn th·ªã:</label>
                    <input type="number" id="sutlun-pageSize" value="100" min="1" max="10000"
                        class="data-table-page-size">
                    <button onclick="updateSutLunData()" class="data-table-update-btn">C·∫≠p nh·∫≠t</button>
                </div>
            </div>
        </div>
        <div class="data-table-content">
            <table id="sutlun-table" class="data-table">
                <thead>
                    <tr>
                        <th>ObjectID</th>
                        <th>ID</th>
                        <th>V·∫≠n t·ªëc TB</th>
                        <th>V·∫≠n t·ªëc SD</th>
                        <th>V·∫≠n t·ªëc t√≠ch l≈©y</th>
                        <th>Th·ªùi gian</th>
                        <th>T·ªça ƒë·ªô</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- D·ªØ li·ªáu s·∫Ω ƒë∆∞·ª£c th√™m ·ªü ƒë√¢y -->
                </tbody>
            </table>
            <div id="sutlun-pagination" class="data-table-pagination"></div>
        </div>
    </div>

    <div id="cong-table-container" class="data-table-container">
        <!-- Resize handles -->
        <div class="resize-handle n"></div>
        <div class="resize-handle s"></div>
        <div class="resize-handle e"></div>
        <div class="resize-handle w"></div>
        <div class="resize-handle ne"></div>
        <div class="resize-handle nw"></div>
        <div class="resize-handle se"></div>
        <div class="resize-handle sw"></div>

        <div id="cong-table-header" class="data-table-header">
            <div class="data-table-title-container">
                <h4 class="data-table-title">üìä B·∫£ng d·ªØ li·ªáu C·ªëng</h4>
                <button onclick="closeCongTable()" class="data-table-close-btn">‚úï</button>
            </div>
            <div class="data-table-controls">
                <div class="data-table-search-section">
                    <input type="text" id="cong-search-input"
                        placeholder="T√¨m ki·∫øm theo t√™n, ID ho·∫∑c t·ªça ƒë·ªô (lat, lng, radius)..."
                        class="data-table-search-input">
                    <button onclick="searchCongData()" class="data-table-search-btn">üîç</button>
                </div>
                <div class="data-table-actions">
                    <button onclick="addCongRecord()" class="data-table-action-btn add-btn">‚ûï Th√™m</button>
                    <button onclick="editCongRecord()" class="data-table-action-btn edit-btn" disabled>‚úèÔ∏è S·ª≠a</button>
                    <button onclick="deleteCongRecord()" class="data-table-action-btn delete-btn" disabled>üóëÔ∏è
                        X√≥a</button>
                    <!-- <button onclick="backupCongData()" class="data-table-action-btn backup-btn">üíæ Backup data</button> -->
                </div>
                <div class="data-table-pagination-controls">
                    <label for="cong-pageSize" class="data-table-label">S·ªë d√≤ng hi·ªÉn th·ªã:</label>
                    <input type="number" id="cong-pageSize" value="100" min="1" max="10000"
                        class="data-table-page-size">
                    <button onclick="updateCongData()" class="data-table-update-btn">C·∫≠p nh·∫≠t</button>
                </div>
            </div>
        </div>
        <div class="data-table-content">
            <table id="cong-table" class="data-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>T√™n c·ªëng</th>
                        <th>C·∫•p</th>
                        <th>NƒÉm x√¢y d·ª±ng</th>
                        <th>T√™n x√£</th>
                        <th>S·ªë phai</th>
                        <th>B·ªÅ kho·∫£ng (m)</th>
                        <th>T·ªïng c·ª≠a</th>
                        <th>Ghi ch√∫</th>
                        <th>M√£ c·ªëng</th>
                        <th>Cao tr√¨nh ƒë√°y</th>
                        <th>T√™n chung</th>
                        <th>T√™n ri√™ng</th>
                        <th>T·ªça ƒë·ªô</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- D·ªØ li·ªáu s·∫Ω ƒë∆∞·ª£c th√™m ·ªü ƒë√¢y -->
                </tbody>
            </table>
            <div id="cong-pagination" class="data-table-pagination"></div>
        </div>
    </div>

    <div id="chatluong-table-container" class="data-table-container">
        <!-- Resize handles -->
        <div class="resize-handle n"></div>
        <div class="resize-handle s"></div>
        <div class="resize-handle e"></div>
        <div class="resize-handle w"></div>
        <div class="resize-handle ne"></div>
        <div class="resize-handle nw"></div>
        <div class="resize-handle se"></div>
        <div class="resize-handle sw"></div>

        <div id="chatluong-table-header" class="data-table-header">
            <div class="data-table-title-container">
                <h4 class="data-table-title">üìä B·∫£ng d·ªØ li·ªáu B·ªù Bao</h4>
                <button onclick="closeChatLuongTable()" class="data-table-close-btn">‚úï</button>
            </div>
            <div class="data-table-controls">
                <div class="data-table-actions">
                    <div class="data-table-search-section">
                        <input type="text" id="chatluong-search-input" placeholder="T√¨m ki·∫øm..."
                            class="data-table-search-input">
                        <button onclick="searchChatLuongData()" class="data-table-search-btn">üîç</button>
                    </div>
                    <button onclick="addChatLuongRecord()" class="data-table-action-btn add-btn">‚ûï Th√™m</button>
                    <button onclick="editChatLuongRecord()" class="data-table-action-btn edit-btn" disabled>‚úèÔ∏è
                        S·ª≠a</button>
                    <button onclick="deleteChatLuongRecord()" class="data-table-action-btn delete-btn" disabled>üóëÔ∏è
                        X√≥a</button>
                </div>
                <div class="data-table-pagination-controls">
                    <label for="chatluong-pageSize" class="data-table-label">S·ªë d√≤ng hi·ªÉn th·ªã:</label>
                    <input type="number" id="chatluong-pageSize" value="100" min="1" max="10000"
                        class="data-table-page-size">
                    <button onclick="updateChatLuongData()" class="data-table-update-btn">C·∫≠p nh·∫≠t</button>
                </div>
            </div>
        </div>
        <div class="data-table-content">
            <table id="chatluong-table" class="data-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Layer</th>
                        <th>Kml_folder</th>
                        <th>T·ªça ƒë·ªô</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- D·ªØ li·ªáu s·∫Ω ƒë∆∞·ª£c th√™m ·ªü ƒë√¢y -->
                </tbody>
            </table>
            <div id="chatluong-pagination" class="data-table-pagination"></div>
        </div>
    </div>

    <div id="debao-table-container" class="data-table-container">
        <!-- Resize handles -->
        <div class="resize-handle n"></div>
        <div class="resize-handle s"></div>
        <div class="resize-handle e"></div>
        <div class="resize-handle w"></div>
        <div class="resize-handle ne"></div>
        <div class="resize-handle nw"></div>
        <div class="resize-handle se"></div>
        <div class="resize-handle sw"></div>

        <div id="debao-table-header" class="data-table-header">
            <div class="data-table-title-container">
                <h4 class="data-table-title">üìä B·∫£ng d·ªØ li·ªáu ƒê√™ bao</h4>
                <button onclick="closeDeBaoTable()" class="data-table-close-btn">‚úï</button>
            </div>
            <div class="data-table-controls">
                <div class="data-table-actions">
                    <div class="data-table-search-section">
                        <input type="text" id="debao-search-input" placeholder="T√¨m ki·∫øm..."
                            class="data-table-search-input">
                        <button onclick="searchDeBaoData()" class="data-table-search-btn">üîç</button>
                    </div>
                    <button onclick="addDeBaoRecord()" class="data-table-action-btn add-btn">‚ûï Th√™m</button>
                    <button onclick="editDeBaoRecord()" class="data-table-action-btn edit-btn" disabled>‚úèÔ∏è S·ª≠a</button>
                    <button onclick="deleteDeBaoRecord()" class="data-table-action-btn delete-btn" disabled>üóëÔ∏è
                        X√≥a</button>
                </div>
                <div class="data-table-pagination-controls">
                    <label for="debao-pageSize" class="data-table-label">S·ªë d√≤ng hi·ªÉn th·ªã:</label>
                    <input type="number" id="debao-pageSize" value="100" min="1" max="10000"
                        class="data-table-page-size">
                    <button onclick="updateDeBaoData()" class="data-table-update-btn">C·∫≠p nh·∫≠t</button>
                </div>
            </div>
        </div>
        <div class="data-table-content">
            <table id="debao-table" class="data-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Entity</th>
                        <th>Layer</th>
                        <th>Color</th>
                        <th>Line Type</th>
                        <th>Elevation</th>
                        <th>Line Weight</th>
                        <th>T·ªça ƒë·ªô</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- D·ªØ li·ªáu s·∫Ω ƒë∆∞·ª£c th√™m ·ªü ƒë√¢y -->
                </tbody>
            </table>
            <div id="debao-pagination" class="data-table-pagination"></div>
        </div>
    </div>

    <div id="dolun-table-container" class="data-table-container">
        <!-- Resize handles -->
        <div class="resize-handle n"></div>
        <div class="resize-handle s"></div>
        <div class="resize-handle e"></div>
        <div class="resize-handle w"></div>
        <div class="resize-handle ne"></div>
        <div class="resize-handle nw"></div>
        <div class="resize-handle se"></div>
        <div class="resize-handle sw"></div>

        <div id="dolun-table-header" class="data-table-header">
            <div class="data-table-title-container">
                <h4 class="data-table-title">üìä B·∫£ng d·ªØ li·ªáu ƒê·ªô l√∫n</h4>
                <button onclick="closeDoLunTable()" class="data-table-close-btn">‚úï</button>
            </div>
            <div class="data-table-controls">
                <div class="data-table-actions">
                    <div class="data-table-search-section">
                        <input type="text" id="dolun-search-input" placeholder="T√¨m ki·∫øm..."
                            class="data-table-search-input">
                        <button onclick="searchDoLunData()" class="data-table-search-btn">üîç</button>
                    </div>
                    <button onclick="addDoLunRecord()" class="data-table-action-btn add-btn">‚ûï Th√™m</button>
                    <button onclick="editDoLunRecord()" class="data-table-action-btn edit-btn" disabled>‚úèÔ∏è S·ª≠a</button>
                    <button onclick="deleteDoLunRecord()" class="data-table-action-btn delete-btn" disabled>üóëÔ∏è
                        X√≥a</button>
                </div>
                <div class="data-table-pagination-controls">
                    <label for="dolun-pageSize" class="data-table-label">S·ªë d√≤ng hi·ªÉn th·ªã:</label>
                    <input type="number" id="dolun-pageSize" value="100" min="1" max="10000"
                        class="data-table-page-size">
                    <button onclick="updateDoLunData()" class="data-table-update-btn">C·∫≠p nh·∫≠t</button>
                </div>
            </div>
        </div>
        <div class="data-table-content">
            <table id="dolun-table" class="data-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Grid Code</th>
                        <th>Shape Area</th>
                        <th>Layer</th>
                        <th>T·ªça ƒë·ªô</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- D·ªØ li·ªáu s·∫Ω ƒë∆∞·ª£c th√™m ·ªü ƒë√¢y -->
                </tbody>
            </table>
            <div id="dolun-pagination" class="data-table-pagination"></div>
        </div>
    </div>

    <div id="hientrang-table-container" class="data-table-container">
        <!-- Resize handles -->
        <div class="resize-handle n"></div>
        <div class="resize-handle s"></div>
        <div class="resize-handle e"></div>
        <div class="resize-handle w"></div>
        <div class="resize-handle ne"></div>
        <div class="resize-handle nw"></div>
        <div class="resize-handle se"></div>
        <div class="resize-handle sw"></div>

        <div id="hientrang-table-header" class="data-table-header">
            <div class="data-table-title-container">
                <h4 class="data-table-title">üìä B·∫£ng d·ªØ li·ªáu Hi·ªán tr·∫°ng</h4>
                <button onclick="closeHienTrangTable()" class="data-table-close-btn">‚úï</button>
            </div>
            <div class="data-table-controls">
                <div class="data-table-actions">
                    <div class="data-table-search-section">
                        <input type="text" id="hientrang-search-input" placeholder="T√¨m ki·∫øm..."
                            class="data-table-search-input">
                        <button onclick="searchHienTrangData()" class="data-table-search-btn">üîç</button>
                    </div>
                    <button onclick="addHienTrangRecord()" class="data-table-action-btn add-btn">‚ûï Th√™m</button>
                    <button onclick="editHienTrangRecord()" class="data-table-action-btn edit-btn" disabled>‚úèÔ∏è
                        S·ª≠a</button>
                    <button onclick="deleteHienTrangRecord()" class="data-table-action-btn delete-btn" disabled>üóëÔ∏è
                        X√≥a</button>
                </div>
                <div class="data-table-pagination-controls">
                    <label for="hientrang-pageSize" class="data-table-label">S·ªë d√≤ng hi·ªÉn th·ªã:</label>
                    <input type="number" id="hientrang-pageSize" value="100" min="1" max="10000"
                        class="data-table-page-size">
                    <button onclick="updateHienTrangData()" class="data-table-update-btn">C·∫≠p nh·∫≠t</button>
                </div>
            </div>
        </div>
        <div class="data-table-content">
            <table id="hientrang-table" class="data-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Layer</th>
                        <th>GM_TYPE</th>
                        <th>KML_STYLE</th>
                        <th>KML_FOLDER</th>
                        <th>Tuy·∫øn</th>
                        <th>T·ªça ƒë·ªô</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- D·ªØ li·ªáu s·∫Ω ƒë∆∞·ª£c th√™m ·ªü ƒë√¢y -->
                </tbody>
            </table>
            <div id="hientrang-pagination" class="data-table-pagination"></div>
        </div>
    </div>

    <!-- B·∫£ng d·ªØ li·ªáu Ng·∫≠p l·ª•t -->
    <div id="ngaplut-table-container" class="data-table-container" style="display: none;">
        <!-- Resize handles -->
        <div class="resize-handle n"></div>
        <div class="resize-handle s"></div>
        <div class="resize-handle e"></div>
        <div class="resize-handle w"></div>
        <div class="resize-handle ne"></div>
        <div class="resize-handle nw"></div>
        <div class="resize-handle se"></div>
        <div class="resize-handle sw"></div>

        <div id="ngaplut-table-header" class="data-table-header">
            <div class="data-table-title-container">
                <h4 class="data-table-title">üìä B·∫£ng d·ªØ li·ªáu Ng·∫≠p l·ª•t</h4>
                <button onclick="closeNgaplutTable()" class="data-table-close-btn">‚úï</button>
            </div>
            <div class="data-table-controls">
                <div class="data-table-actions">
                    <div class="data-table-search-section">
                        <input type="text" id="ngaplut-search-input" placeholder="T√¨m ki·∫øm..."
                            class="data-table-search-input">
                        <button onclick="searchNgaplutData()" class="data-table-search-btn">üîç</button>
                    </div>
                    <button onclick="addNgaplutRecord()" class="data-table-action-btn add-btn">‚ûï Th√™m</button>
                    <button onclick="editNgaplutRecord()" class="data-table-action-btn edit-btn" disabled>‚úèÔ∏è
                        S·ª≠a</button>
                    <button onclick="deleteNgaplutRecord()" class="data-table-action-btn delete-btn" disabled>üóëÔ∏è
                        X√≥a</button>
                </div>
                <div class="data-table-pagination-controls">
                    <label for="ngaplut-pageSize" class="data-table-label">S·ªë d√≤ng hi·ªÉn th·ªã:</label>
                    <input type="number" id="ngaplut-pageSize" value="100" min="1" max="100000"
                        class="data-table-page-size">
                    <button onclick="updateNgaplutData()" class="data-table-update-btn">C·∫≠p nh·∫≠t</button>
                </div>
            </div>
        </div>
        <div class="data-table-content">
            <table id="ngaplut-table" class="data-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Gi√° tr·ªã trung b√¨nh</th>
                        <th>Chi·ªÅu d√†i (m)</th>
                        <th>Di·ªán t√≠ch (m¬≤)</th>
                        <th>L·ªõp</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- D·ªØ li·ªáu s·∫Ω ƒë∆∞·ª£c th√™m ·ªü ƒë√¢y -->
                </tbody>
            </table>
            <div id="ngaplut-pagination" class="data-table-pagination"></div>
        </div>
    </div>

    <!-- B·∫£ng d·ªØ li·ªáu ƒêi·ªÉm kh·∫£o s√°t -->
    <div id="khaosat-table-container" class="data-table-container" style="display: none;">
        <!-- Resize handles -->
        <div class="resize-handle n"></div>
        <div class="resize-handle s"></div>
        <div class="resize-handle e"></div>
        <div class="resize-handle w"></div>
        <div class="resize-handle ne"></div>
        <div class="resize-handle nw"></div>
        <div class="resize-handle se"></div>
        <div class="resize-handle sw"></div>

        <div id="khaosat-table-header" class="data-table-header">
            <div class="data-table-title-container">
                <h4 class="data-table-title">üìä B·∫£ng d·ªØ li·ªáu ƒêi·ªÉm kh·∫£o s√°t</h4>
                <button onclick="closeKhaoSatTable()" class="data-table-close-btn">‚úï</button>
            </div>
            <div class="data-table-controls">
                <div class="data-table-search-section">
                    <input type="text" id="khaosat-search-input"
                        placeholder="T√¨m ki·∫øm theo t√™n, ID ho·∫∑c t·ªça ƒë·ªô (lat, lng, radius)..."
                        class="data-table-search-input">
                    <button onclick="searchKhaoSatData()" class="data-table-search-btn">üîç</button>
                </div>
                <div class="data-table-actions">
                    <button onclick="addKhaoSatRecord()" class="data-table-action-btn add-btn">‚ûï Th√™m</button>
                    <button onclick="editKhaoSatRecord()" class="data-table-action-btn edit-btn" disabled>‚úèÔ∏è
                        S·ª≠a</button>
                    <button onclick="deleteKhaoSatRecord()" class="data-table-action-btn delete-btn" disabled>üóëÔ∏è
                        X√≥a</button>
                </div>
                <div class="data-table-pagination-controls">
                    <label for="khaosat-pageSize" class="data-table-label">S·ªë d√≤ng hi·ªÉn th·ªã:</label>
                    <input type="number" id="khaosat-pageSize" value="100" min="1" max="10000"
                        class="data-table-page-size">
                    <button onclick="updateKhaoSatData()" class="data-table-update-btn">C·∫≠p nh·∫≠t</button>
                </div>
            </div>
        </div>
        <div class="data-table-content">
            <table id="khaosat-table" class="data-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>T√™n ƒëi·ªÉm</th>
                        <th>Vƒ© ƒë·ªô</th>
                        <th>Kinh ƒë·ªô</th>
                        <th>H√¨nh ·∫£nh</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- D·ªØ li·ªáu s·∫Ω ƒë∆∞·ª£c th√™m ·ªü ƒë√¢y -->
                </tbody>
            </table>
            <div id="khaosat-pagination" class="data-table-pagination"></div>
        </div>
    </div>

    <div id="user-table-container" class="data-table-container" style="display: none;">
        <div class="resize-handle n"></div>
        <div class="resize-handle s"></div>
        <div class="resize-handle e"></div>
        <div class="resize-handle w"></div>
        <div class="resize-handle ne"></div>
        <div class="resize-handle nw"></div>
        <div class="resize-handle se"></div>
        <div class="resize-handle sw"></div>

        <div id="user-table-header" class="data-table-header">
            <div class="data-table-title-container">
                <h4 class="data-table-title">üìä B·∫£ng Users</h4>
                <button onclick="window.closeUserTable()" class="data-table-close-btn">‚úï</button>
            </div>
            <div class="data-table-controls">
                <div class="data-table-actions">
                    <div class="data-table-search-section">
                        <input type="text" id="user-search-input" placeholder="T√¨m ki·∫øm..."
                            class="data-table-search-input">
                        <button onclick="window.searchUserData()" class="data-table-search-btn">üîç</button>
                    </div>
                    <button onclick="window.addUserRecord()" class="data-table-action-btn add-btn">‚ûï Th√™m</button>
                    <button onclick="window.editUserRecord()" class="data-table-action-btn edit-btn" disabled>‚úèÔ∏è
                        S·ª≠a</button>
                </div>
            </div>
        </div>
        <div class="data-table-content">
            <table id="user-table" class="data-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>T√™n ƒëƒÉng nh·∫≠p</th>
                        <th>Role</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
            <div id="user-pagination" class="data-table-pagination"></div>
        </div>
    </div>

    <!-- Widget th·ªùi ti·∫øt -->
    <div id="weatherWidget" class="weather-widget" style="display: none;">
        <div class="weather-bg" id="weatherBg"></div>
        <div class="weather-content">
            <div class="weather-header">
                <select id="provinceSelect" onchange="fetchWeather()"></select>
            </div>
            <div class="weather-time-container">
                <span id="weatherTime">--</span>
            </div>
            <div class="weather-today">
                <div class="weather-icon-large" id="weatherIconMain">üå§Ô∏è</div>
                <div class="weather-temp" id="weatherTempMain">--¬∞C</div>
                <div class="weather-desc" id="weatherDescMain">--</div>
            </div>
            <div class="weather-forecast" id="weatherForecast"></div>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.9.0/proj4.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/leaflet.heat@0.2.0/dist/leaflet-heat.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://d3js.org/d3-contour.v1.min.js"></script>
    <script src="weather.js"></script>
    <script src="weather-drag.js"></script>
    <script src="main.js"></script>
    <script src="login/login.js"></script>
    <script src="layers/layer_elements_hydro.js"></script>
    <script src="layers/layer_mo_hinh_thuy_luc_2d.js"></script>
    <script src="layers/layer_mo_hinh_thuy_luc_2d_canvas.js"></script>
    <script src="layers/layer_mo_hinh_thuy_luc_2d_contour.js"></script>
    <script src="layers/layer_cong.js"></script>
    <script src="layers/layer_chatluong.js"></script>
    <script src="layers/layer_debao.js"></script>
    <script src="layers/layer_dolun.js"></script>
    <script src="layers/layer_hientrang.js"></script>
    <script src="layers/layer_sutlun.js"></script>
    <script src="layers/layer_ngaplut.js"></script>
    <script src="layers/layer_khaosat.js"></script>
    <script src="tables/table_sutlun.js"></script>
    <script src="tables/table_elements.js"></script>
    <script src="tables/table_hydro.js"></script>
    <script src="tables/table_cong.js"></script>
    <script src="tables/table_chatluong.js"></script>
    <script src="tables/table_debao.js"></script>
    <script src="tables/table_dolun.js"></script>
    <script src="tables/table_hientrang.js"></script>
    <script src="tables/table_ngaplut.js"></script>
    <script src="tables/table_khaosat.js"></script>
    <script src="tables/table_user.js"></script>
    <script src="tables/table_roles.js"></script>
    <script>
        // Kh·ªüi t·∫°o table s·ª•t l√∫n, c·ªëng, ch·∫•t l∆∞·ª£ng, ƒë√™ bao, ƒë·ªô l√∫n, hi·ªán tr·∫°ng v√† ng·∫≠p l·ª•t sau khi t·∫•t c·∫£ script ƒë√£ load
        document.addEventListener('DOMContentLoaded', function () {
            if (typeof window.initSutLunTable === 'function') {
                window.initSutLunTable();
            }
            if (typeof window.initElementsTable === 'function') {
                window.initElementsTable();
            }
            if (typeof window.initHydroTable === 'function') {
                window.initHydroTable();
            }
            if (typeof window.initCongTable === 'function') {
                window.initCongTable();
            }
            if (typeof window.initChatLuongTable === 'function') {
                window.initChatLuongTable();
            }
            if (typeof window.initDeBaoTable === 'function') {
                window.initDeBaoTable();
            }
            if (typeof window.initDoLunTable === 'function') {
                window.initDoLunTable();
            }
            if (typeof window.initHienTrangTable === 'function') {
                window.initHienTrangTable();
            }
            if (typeof window.initNgaplutTable === 'function') {
                window.initNgaplutTable();
            }
            if (typeof window.initKhaoSatTable === 'function') {
                window.initKhaoSatTable();
            }
            if (typeof window.initUserTable === 'function') {
                window.initUserTable();
            }
        });
    </script>
</body>

</html>